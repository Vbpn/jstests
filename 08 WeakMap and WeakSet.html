<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <h1>WeakMap and WeakSet</h1>
  <script>
  "use strict";
  /*
  Your code can access it, but the messages are managed by someone else’s code. New messages are added, old ones are removed regularly by that code, and you don’t know the exact moments when it happens.
  */

  let messages = [
    {text: "Hello", from: "John"},
    {text: "How goes?", from: "John"},
    {text: "See you soon", from: "Alice"}
  ];
  /*
  let readMsgs = new WeakSet();
  readMsgs.add(messages[0]);
  readMsgs.add(messages[1]);

  // the symbolic property is only known to our code
  let isRead = Symbol("isRead");
  messages[0][isRead] = true;

  messages.splice(1,2);
  console.log(messages);
  console.log(readMsgs);*/

/*
Now we need to store the date, and it should only remain in memory until the message is garbage collected.
*/
let readMsgsDate = new WeakMap();
readMsgsDate.set(messages[0], Date.now());
readMsgsDate.set(messages[1], Date.now());

console.log(readMsgsDate);


  </script>

</body>
</html>
